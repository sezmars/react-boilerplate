import{k as b,n as S,j as e,B as p,H as F}from"./index-d4476aa7.js";import{u as q}from"./index.esm-b0752a13.js";import{F as y,I as d}from"./Input-b2f66ad6.js";import{F as i}from"./FormRow-ca72ddba.js";import{u as v}from"./useMutation-ed049d00.js";const C=()=>{const{mutate:t,isLoading:a}=v({mutationFn:b,onSuccess:()=>{S.success("Account successfully created! Please verufy the new account from the user's email address.")}});return{signup:t,isLoading:a}},P=()=>{var o,u,m,c;const{signup:t,isLoading:a}=C(),{register:r,formState:h,getValues:f,handleSubmit:g,reset:l}=q(),{errors:s}=h,x=({fullName:n,email:w,password:j})=>{t({fullName:n,email:w,password:j},{onSettled:()=>l()})};return e.jsxs(y,{onSubmit:g(x),children:[e.jsx(i,{label:"Full name",error:(o=s==null?void 0:s.fullName)==null?void 0:o.message,children:e.jsx(d,{type:"text",id:"fullName",disabled:a,...r("fullName",{required:"This field is required"})})}),e.jsx(i,{label:"Email address",error:(u=s==null?void 0:s.email)==null?void 0:u.message,children:e.jsx(d,{type:"email",id:"email",disabled:a,...r("email",{required:"This field is required",pattern:{value:/\S+@\S+\.\S+/,message:"Please provide a valid email address"}})})}),e.jsx(i,{label:"Password (min 8 characters)",error:(m=s==null?void 0:s.password)==null?void 0:m.message,children:e.jsx(d,{type:"password",id:"password",disabled:a,...r("password",{required:"This field is required",minLength:{value:8,message:"Password needs a minimum of 8 characters"}})})}),e.jsx(i,{label:"Repeat password",error:(c=s==null?void 0:s.passwordConfirm)==null?void 0:c.message,children:e.jsx(d,{type:"password",id:"passwordConfirm",disabled:a,...r("passwordConfirm",{required:"This field is required",validate:n=>n===f().password||"Passwords need to match"})})}),e.jsxs(i,{children:[e.jsx(p,{variation:"secondary",type:"reset",disabled:a,onClick:l,children:"Cancel"}),e.jsx(p,{disabled:a,children:"Create new user"})]})]})},B=()=>e.jsxs(e.Fragment,{children:[e.jsx(F,{as:"h1",children:"Create a new user"}),e.jsx(P,{})]});export{B as default};
